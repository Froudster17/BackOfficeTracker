<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard — Back Office Tracker</title>
    <link rel="stylesheet" href="/css/dashboard.css" />
</head>
<body>
    <!-- Reuse the animated background vibe -->
    <div class="bg">
        <div class="orb orb-a"></div>
        <div class="orb orb-b"></div>
        <div class="noise"></div>
    </div>

    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">BOT</div>
            <nav class="side-nav">
                <a class="nav-item current" href="/dashboard.html" title="Dashboard">🏠</a>
                <a class="nav-item" href="/reports.html" title="Reports">📊</a>
                <a class="nav-item" href="/index.html" title="Logout">↩</a>
            </nav>
        </aside>

        <!-- Main content -->
        <main class="main">
            <!-- Top bar -->
            <header class="topbar">
                <div class="left">
                    <button id="newTicketBtn" class="btn pill">＋ New Ticket</button>
                    <button id="newRequestBtn" class="btn pill">＋ New Request</button>
                    <label class="date-wrap pill">
                        <input id="datePicker" type="date" />
                    </label>
                </div>
                <div class="right">
                    <div class="agent pill" id="agentChip">Agent</div>
                    <span id="copyStatus" class="copy-status" aria-live="polite"></span>
                </div>
            </header>

            <!-- Ticket list -->
            <section class="list-wrap card">
                <h2 class="sr-only">Your tickets</h2>
                <ul id="ticketList" class="ticket-list" role="list">
                    <!-- rows injected by JS -->
                </ul>
                <div id="emptyState" class="empty hidden">
                    <div class="empty-blob">🗂️</div>
                    <p>No tickets for this date.</p>
                </div>
            </section>
        </main>
    </div>

    <script src="/js/dashboard.js?v=6" defer></script>

    <!-- Ticket Modal -->
    <div id="ticketModal" class="modal hidden" aria-hidden="true" role="dialog" aria-labelledby="ticketTitle">
        <div class="overlay" data-close></div>

        <section class="sheet card">
            <header class="sheet-head">
                <h2 id="ticketTitle">New Ticket Action</h2>
                <button class="close" type="button" data-close aria-label="Close">✕</button>
            </header>

            <form id="ticketForm" class="sheet-body" novalidate>
                <label class="field">
                    <span>Ticket Number</span>
                    <input id="tkNumber" name="ticketNumber" placeholder="INC123456" required />
                </label>

                <label class="field">
                    <span>What did you do</span>
                    <div class="select-wrap">
                        <select id="tkAction" name="action" required>
                            <option value="" disabled selected>Select an action…</option>
                            <option>Resolved</option>
                            <option>#1</option>
                            <option>#2</option>
                            <option>Pending Update</option>
                            <option>With DTL/TL/SDM</option>
                            <option>Incorrect Assignment Group</option>
                            <option>Awaiting vendor/third-party</option>
                            <option value="__other">Other…</option>
                        </select>
                    </div>
                    <input id="tkActionOther" class="hidden" placeholder="Describe the action…" />
                </label>

                <label class="field">
                    <span>Description</span>
                    <textarea id="tkDesc" name="description" placeholder="Add any useful details…" rows="4"></textarea>
                </label>

                <!-- Read-only time + update checkbox -->
                <div class="field">
                    <span>Logged time</span>
                    <div id="tkTimeDisplay" class="pill" style="display:inline-block"></div>
                </div>

                <div class="actions">
                    <button id="ticketSubmitBtn" class="btn" type="submit">Submit</button>
                    <button id="ticketDeleteBtn" class="btn ghost" type="button" style="margin-left:auto;display:none">Delete</button>
                    <button class="btn ghost" type="button" data-close>Cancel</button>
                </div>
                <p id="ticketStatus" class="status" aria-live="polite"></p>
            </form>
        </section>
    </div>
</body>
</html>
